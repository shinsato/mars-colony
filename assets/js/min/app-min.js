!function(t,o){"use strict";t.module("app",["ngDraggable"]).controller("appController",["$scope","$interval",function(t,i){t.totalCount=0;var e=function(){this.gender=chance.gender(),this.name=chance.name({gender:this.gender}),this.age=o.random(15,30),this.charisma={},buildOut(this.charisma),this.strength={},buildOut(this.strength),this.intelligence={},buildOut(this.intelligence),this.endurance={},buildOut(this.endurance),this.uid=this.charisma.gene.concat(this.endurance.gene,this.strength.gene,this.intelligence.gene),this.farming=!1,this.alive=!0,this.withChild=!1,this.room=0,t.totalCount++};e.prototype.Age=function(){if(!this.alive)return!1;if(this.farming){var i=this.RollStrength();i>5?n.food++:i>=9&&(n.food=n.food+2)}if(this.withChild>0&&this.withChild++,"Female"==this.gender){if(this.withChild>=3){this.withChild=!1;var s=new e;s.id=t.colony.colonists.length,s.age=0,t.colony.colonists.push(s)}if(this.IsFertile()&&!this.farming){console.log("trying",this.farming);for(var a in t.colony.colonists){var r=t.colony.colonists[a];if(this.id!=r.id&&this.room>=1&&this.room<=10&&this.room==r.room&&this.IsFertile()&&"Male"==r.gender&&r.farming===!1){var h=o.random(1,6);console.log("Roll to conceive");var l=h+this.charisma.attr+r.charisma.attr;if(l>=4){this.withChild=1,console.log("With child!");break}}}}}this.age++,this.RollEndurance(),this.endurance.attr<1&&(this.alive=!1,t.totalCount--)},e.prototype.RollEndurance=function(){var t=o.random(1,10);this.age<=2||this.age>=75?t-=2:(this.age<=5||this.age>=65)&&(t-=1),1>=t&&this.endurance.attr--},e.prototype.RollStrength=function(){var t=o.random(1,10);return t+(this.endurance.attr-5)},e.prototype.IsFertile=function(){return this.alive&&this.age>=18&&0==this.withChild?"Female"==this.gender&&this.age>=51?!1:!0:!1};var n=function(t,o){o=o||6,this.starterCount=o,this.name=t,this.age=0,this.alive=!0,this.colonists=[],this.couples=[],this.food=7*o;for(var i=1;o>=i;i++){var n=new e;n.id=this.colonists.length,this.colonists.push(n)}};n.prototype.Age=function(){var t=!1,o=this;this.age++,this.food--;for(var i in this.colonists)if(this.colonists[i].Age(),this.colonists[i].alive&&(t=!0),this.colonists[i].farming){var e=this.colonists[i].RollStrength();e>5&&o.food++,console.log("Food Fired",e)}this.alive=t},t.onDragSucces=function(o,i,e){var n=t.draggableObjects[o],s=t.draggableObjects.indexOf(i);t.draggableObjects[o]=i,t.draggableObjects[s]=n},t.game={theLoop:!1,started:!1,colonyStarted:!1,colonyName:"OMG Why?",numColonists:6},t.beginColony=function(){t.colony=new n(t.game.colonyName,t.game.numColonists),t.game.started=!0,t.game.colonyStarted=!0,t.startColony()},t.startColony=function(){t.game.theLoop=i(function(){t.colony.Age(),t.colony.alive||(t.game.colonyStarted=!1,t.stopColony())},1e3)},t.stopColony=function(){i.cancel(t.game.theLoop),t.game.theLoop=!1},t.togglePause=function(){t.game.colonyStarted&&(t.game.theLoop!==!1?t.stopColony():t.startColony())}}]).controller("manageCrew",["$scope",function(t){}]).directive("pressSpace",function(){return function(t,o,i){o.bind("keydown keypress",function(o){32===o.which&&(t.$apply(function(){t.$eval(i.pressSpace)}),o.preventDefault())})}})}(window.angular,window._);